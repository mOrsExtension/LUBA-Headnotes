<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{% block title %}{{ database }}: {{ table }} - LUBA Headnotes{% endblock %}</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
<div class="container">
    <h1>LUBA Headnotes Database</h1>
    <p>Oregon Land Use Board of Appeals case law, organized by topic and searchable.</p>

    <div class="search-controls">
        <details open="">
            <summary><div class="search-heading"><h2>Search & SQL</h2></div></summary>
            <div class="search-section">
                <h3>Text Search</h3>
                {% block search %}{% endblock %}
            </div>
            <div class="search-section">
                <h3>SQL Search</h3>
                {% block sql %}{% endblock %}
                <div class="sql-field-list">
                    <h4>Available Fields:</h4>
                    <code>headnote [number], topic [headnote name], summary, case_name, reporter [xx Or LUBA xxx], year, ors_cites [xxx.xxx], oar_cites [xxx-xxx-xxxx], case_cites [reporter only], luba_no [year-xx], warnings, index [unique key]</code>
                </div>
                <div class="sql-examples">
                    <h4>Example SQL Queries (click to populate):</h4>
                    <div class="example-queries">
                        <!-- Filled on client side by sql_examples.js-->
                    </div>
                </div>
            </div>
        </details>
        <details>
            <summary><div class="search-heading"><h2>Headnote List</h2></div></summary>
            {% include 'headnote_list.html' %}
        </details>
    </div>


{% if rows %}
    {% from 'headnote_display.html' import check_type %}
    {% set sql_query = request.args.get('sql', '').lower() %}
    {{ check_type(rows, sql_query) }}
{% else %}
    <div class="no-results">
        No headnotes found. Try adjusting your search terms.
    </div>
{% endif %}

{% block content %}
<!-- Page-specific content goes here -->
{% endblock %}


</div>
    <script src="/static/add_links.js"></script>
    <script src="/static/sql_examples.js"></script>
    <script src="/static/add_formatting.js"></script>
</body>
</html>